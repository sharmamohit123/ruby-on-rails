<% provide(:title, "Log in") %>
<style>
.login_error{
    color:red;
    font-size:13px;
}
</style>
<% if !logged_in? %>
<div id="login-box">
    <div class="left">
        <h1>Log in</h1>

    <%= form_for(:session, url: login_path) do |f| %>
    <div class="login_error">
        <%= flash.now[:danger] %>
    </div>
      <%= f.text_field :email, class: 'form-control', placeholder: 'Email' %>

      <%= f.password_field :password, class: 'form-control', placeholder: 'Password' %>

      <%= f.submit "Login", class: "btn btn-primary" %>
    <% end %>

    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>

<div class="right">
<span class="loginwith">Sign in with<br /><br />social network</span>

<button class="social-signin facebook"><%= link_to "Log in with Facebook", "/auth/facebook", id: "sign_in" %></button>
<button class="social-signin twitter">Log in with Twitter</button>
<button class="social-signin google">Log in with Google+</button>
</div>
<div class="or">OR</div>
</div>
<% else %>
<h1> Access Denied </h1>
<% end %>

<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '{your-app-id}',
    cookie     : true,
    xfbml      : true,
    version    : '{latest-api-version}'
  });
  FB.AppEvents.logPageView();   
};

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_US/sdk.js";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
</script>